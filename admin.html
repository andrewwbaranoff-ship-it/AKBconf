<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>AKBconf Admin</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<h2>Админ — Настройка сервера сигналинга</h2>
<input id="input-server" placeholder="URL сервера">
<button id="btn-save">Сохранить</button>
<div id="msg"></div>

<script>
const token = localStorage.getItem('akbconf_token');
const input = document.getElementById('input-server');
const btn = document.getElementById('btn-save');
const msg = document.getElementById('msg');

async function loadServer(){
  const res = await fetch('https://ваш-сервер-на-render/api/admin', {
    headers: { Authorization: 'Bearer ' + token }
  });
  const data = await res.json();
  if(data.ok) input.value = data.signalingServer;
}
loadServer();

btn.addEventListener('click', async ()=>{
  const url = input.value.trim();
  const res = await fetch('https://ваш-сервер-на-render/api/admin', {
    method:'POST', headers:{
      'Content-Type':'application/json',
      Authorization: 'Bearer '+token
    },
    body: JSON.stringify({ signalingServer: url })
  });
  const data = await res.json();
  msg.textContent = data.ok ? 'Сохранено' : data.error;
});
</script>
</body>
</html>